@startuml
title Edit Post Flow

actor User
participant Browser
participant "PostController" as PostController
participant "Auth Service" as AuthService
participant "PostService" as PostService
participant Database

activate User
activate Browser
User -> Browser: Click edit button
Browser -> User: Show edit modal
User -> Browser: Modify content and save
Browser -> PostController: PATCH /api/posts/[id]
activate PostController
PostController -> AuthService: Verify session
activate AuthService
AuthService -> PostController: User data
deactivate AuthService
PostController -> PostService: Post data + User data
activate PostService
PostService -> Database: Check post ownership
activate Database
Database -> PostService: Post data
PostService -> Database: Update post
Database -> PostService: Post updated
deactivate Database
PostService -> PostController: Return post data
deactivate PostService
PostController -> Browser: Status code 200 + Post data
deactivate PostController
Browser -> User: Render updated post

@enduml