<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1326.0967648593032" height="697.1196510123181"><desc>%40startuml%0Atitle%20Real-time%20Chat%20-%20Reconnection%20Flow%0A%0Aactor%20User%0Aparticipant%20Browser%0Aparticipant%20%22Socket%20Client%22%20as%20SocketClient%0Aparticipant%20%22Socket%20Server%22%20as%20SocketServer%0Aparticipant%20%22useMessages%20Hook%22%20as%20Hook%0Aparticipant%20%22PostController%22%20as%20PostController%0Aparticipant%20Database%0Aparticipant%20ChatArea%0A%0Aactivate%20User%0Aactivate%20Browser%0A%0AUser%20-%3E%20Browser%3A%20Online%0ABrowser%20-%3E%20SocketClient%3A%20Detect%20online%0Aactivate%20SocketClient%0ASocketClient%20-%3E%20SocketServer%3A%20Reconnect%0Aactivate%20SocketServer%0ASocketServer%20-%3E%20SocketClient%3A%20Connection%20established%0Adeactivate%20SocketServer%0ASocketClient%20-%3E%20Hook%3A%20Clear%20polling%0Adeactivate%20SocketClient%0Aactivate%20Hook%0AHook%20-%3E%20PostController%3A%20Fetch%20missed%20messages%0Aactivate%20PostController%0APostController%20-%3E%20Database%3A%20Get%20messages%20since%20last%20timestamp%0Aactivate%20Database%0ADatabase%20-%3E%20PostController%3A%20New%20messages%0Adeactivate%20Database%0APostController%20-%3E%20Hook%3A%20Messages%20data%0Adeactivate%20PostController%0AHook%20-%3E%20ChatArea%3A%20Update%20UI%0Adeactivate%20Hook%0Aactivate%20ChatArea%0AChatArea%20-%3E%20User%3A%20Render%20updated%20messages%0Adeactivate%20ChatArea%0A%0A%40enduml</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1326" height="697"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 23.64361483359375 128.65457617231817 L 23.64361483359375 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 125.91587088704426 128.65457617231817 L 125.91587088704426 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 271.3806623408854 128.65457617231817 L 271.3806623408854 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 483.68149810624993 128.65457617231817 L 483.68149810624993 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 645.8720591810195 128.65457617231817 L 645.8720591810195 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 863.8278784668919 128.65457617231817 L 863.8278784668919 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1155.112234740069 128.65457617231817 L 1155.112234740069 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1269.2391208880806 128.65457617231817 L 1269.2391208880806 697.1196510123181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 32.95468071459375 59.55666621331818 A 9.311065881 9.311065881 0 1 1 32.9546760590612 59.54735514898902" stroke-miterlimit="10" stroke-width="2.7769845610000004" stroke-dasharray=""/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 23.64361483359375 68.86773209431819 L 23.64361483359375 88.79668012031819 M 11.882268457593753 76.05522154631818 L 35.40496120959375 76.05522154631818 M 23.64361483359375 88.79668012031819 L 11.882268457593753 107.41881188231818 M 23.64361483359375 88.79668012031819 L 35.40496120959375 107.41881188231818" stroke-miterlimit="10" stroke-width="2.7769845610000004"/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="8.167601650000002" y="123.75401518231817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 81.30958405898566 84.54952726231818 L 170.52215771510288 84.54952726231818 L 170.52215771510288 128.65457617231817 L 81.30958405898566 128.65457617231817 L 81.30958405898566 84.54952726231818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="99.03327963948567" y="112.31937287231818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Browser</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 210.47158773206507 84.71287929531819 L 332.2897369497057 84.71287929531819 L 332.2897369497057 128.65457617231817 L 210.47158773206507 128.65457617231817 L 210.47158773206507 84.71287929531819 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="228.1952833125651" y="112.3193728723182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Socket Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 419.9234702503593 84.71287929531819 L 547.4395259621406 84.71287929531819 L 547.4395259621406 128.65457617231817 L 419.9234702503593 128.65457617231817 L 419.9234702503593 84.71287929531819 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="437.6471658308593" y="112.3193728723182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Socket Server</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 563.7747292621406 84.71287929531819 L 727.9693890998984 84.71287929531819 L 727.9693890998984 128.65457617231817 L 563.7747292621406 128.65457617231817 L 563.7747292621406 84.71287929531819 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="581.4984248426406" y="112.3193728723182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">useMessages Hook</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 799.66183059147 84.71287929531819 L 927.9939263423138 84.71287929531819 L 927.9939263423138 128.65457617231817 L 799.66183059147 128.65457617231817 L 799.66183059147 84.71287929531819 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="817.38552617197" y="112.3193728723182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PostController</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1106.01059421328 84.54952726231818 L 1204.2138752668582 84.54952726231818 L 1204.2138752668582 128.65457617231817 L 1106.01059421328 128.65457617231817 L 1106.01059421328 84.54952726231818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1123.73428979378" y="112.31937287231818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Database</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1220.549078566858 84.54952726231818 L 1317.9291632093034 84.54952726231818 L 1317.9291632093034 128.65457617231817 L 1220.549078566858 128.65457617231817 L 1220.549078566858 84.54952726231818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1238.272774147358" y="112.31937287231818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ChatArea</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 15.476013183593752 136.82217782231817 L 31.811216483593753 136.82217782231817 L 31.811216483593753 680.7844477123181 L 15.476013183593752 680.7844477123181 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 117.74826923704427 136.82217782231817 L 134.08347253704426 136.82217782231817 L 134.08347253704426 680.7844477123181 L 117.74826923704427 680.7844477123181 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 263.2130606908854 228.29931630231818 L 279.5482639908854 228.29931630231818 L 279.5482639908854 365.5150240223182 L 263.2130606908854 365.5150240223182 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 475.51389645624994 274.0378855423182 L 491.8490997562499 274.0378855423182 L 491.8490997562499 319.7764547823182 L 475.51389645624994 319.7764547823182 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 637.7044575310194 365.5150240223182 L 654.0396608310195 365.5150240223182 L 654.0396608310195 594.2078702223181 L 637.7044575310194 594.2078702223181 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 855.6602768168918 411.2535932623182 L 871.9954801168919 411.2535932623182 L 871.9954801168919 548.4693009823181 L 855.6602768168918 548.4693009823181 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1146.944633090069 456.9921625023182 L 1163.279836390069 456.9921625023182 L 1163.279836390069 502.7307317423182 L 1146.944633090069 502.7307317423182 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1261.0715192380806 594.2078702223181 L 1277.4067225380807 594.2078702223181 L 1277.4067225380807 639.946439462318 L 1261.0715192380806 639.946439462318 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="491.6988220214844" y="24.651306798181814" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Real-time Chat - Reconnection Flow</text></g><g><rect fill="white" stroke="none" x="51.14120705526041" y="161.32498277231818" width="47.27707161011719" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="53.59148755026041" y="176.02666574231816" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Online</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 31.811216483593753 182.56074706231817 L 104.2989518533776 182.56074706231817" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(117.74826923704427,182.56074706231817) translate(-117.74826923704427,-182.56074706231817)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 104.1355998203776 175.75441235398483 L 117.74826923704427 182.56074706231817 L 104.1355998203776 189.3670817706515 Z"/></g></g><g><rect fill="white" stroke="none" x="153.41346310871094" y="207.06355201231818" width="90.46960701050781" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="155.86374360371093" y="221.76523498231816" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Detect online</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 134.08347253704426 228.29931630231818 L 249.76374330721876 228.29931630231818" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(263.2130606908854,228.29931630231818) translate(-263.2130606908854,-228.29931630231818)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 249.60039127421874 221.49298159398484 L 263.2130606908854 228.29931630231818 L 249.60039127421874 235.1056510106515 Z"/></g></g><g><rect fill="white" stroke="none" x="340.03786149614575" y="252.80212125231822" width="74.98643745484375" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="342.48814199114577" y="267.5038042223182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Reconnect</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 279.5482639908854 274.0378855423182 L 462.0645790725833 274.0378855423182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(475.51389645624994,274.0378855423182) translate(-475.51389645624994,-274.0378855423182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 461.90122703958326 267.23155083398484 L 475.51389645624994 274.0378855423182 L 461.90122703958326 280.8442202506515 Z"/></g></g><g><rect fill="white" stroke="none" x="298.878254562552" y="298.54069049231816" width="157.30565132203125" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="301.328535057552" y="313.24237346231814" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Connection established</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 475.51389645624994 319.7764547823182 L 292.99758137455206 319.7764547823182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(279.5482639908854,319.7764547823182) translate(-279.5482639908854,-319.7764547823182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 293.1609334075521 312.97012007398484 L 279.5482639908854 319.7764547823182 L 293.1609334075521 326.5827894906515 Z"/></g></g><g><rect fill="white" stroke="none" x="415.4316497239602" y="344.27925973231817" width="86.38942207398438" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="417.88193021896024" y="358.98094270231815" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Clear polling</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 279.5482639908854 365.5150240223182 L 624.2551401473528 365.5150240223182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(637.7044575310194,365.5150240223182) translate(-637.7044575310194,-365.5150240223182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 624.0917881143528 358.70868931398485 L 637.7044575310194 365.5150240223182 L 624.0917881143528 372.3213587306515 Z"/></g></g><g><rect fill="white" stroke="none" x="673.3696514026861" y="390.01782897231817" width="162.96063484253906" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="675.8199318976862" y="404.71951194231815" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Fetch missed messages</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 654.0396608310195 411.2535932623182 L 842.2109594332252 411.2535932623182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(855.6602768168918,411.2535932623182) translate(-855.6602768168918,-411.2535932623182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 842.0476074002252 404.44725855398485 L 855.6602768168918 411.2535932623182 L 842.0476074002252 418.05992797065153 Z"/></g></g><g><rect fill="white" stroke="none" x="891.3254706885585" y="435.7563982123182" width="236.28917182984375" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="893.7757511835586" y="450.45808118231815" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Get messages since last timestamp</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 871.9954801168919 456.9921625023182 L 1133.4953157064022 456.9921625023182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(1146.944633090069,456.9921625023182) translate(-1146.944633090069,-456.9921625023182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1133.3319636734022 450.18582779398486 L 1146.944633090069 456.9921625023182 L 1133.3319636734022 463.79849721065153 Z"/></g></g><g><rect fill="white" stroke="none" x="956.9124152686367" y="481.4949674523182" width="105.1152826696875" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="959.3626957636367" y="496.19665042231816" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">New messages</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1146.944633090069 502.7307317423182 L 885.4447975005586 502.7307317423182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(871.9954801168919,502.7307317423182) translate(-871.9954801168919,-502.7307317423182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 885.6081495335586 495.92439703398486 L 871.9954801168919 502.7307317423182 L 885.6081495335586 509.53706645065154 Z"/></g></g><g><rect fill="white" stroke="none" x="702.6896129505377" y="527.2335366923181" width="104.32071174683594" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="705.1398934455377" y="541.9352196623181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Messages data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 855.6602768168918 548.4693009823181 L 667.4889782146862 548.4693009823181" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(654.0396608310195,548.4693009823181) translate(-654.0396608310195,-548.4693009823181)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 667.6523302476862 541.6629662739848 L 654.0396608310195 548.4693009823181 L 667.6523302476862 555.2756356906515 Z"/></g></g><g><rect fill="white" stroke="none" x="922.1024485166008" y="572.9721059323181" width="70.90628303589844" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="924.5527290116008" y="587.673788902318" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Update UI</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 654.0396608310195 594.2078702223181 L 1247.6222018544138 594.2078702223181" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(1261.0715192380806,594.2078702223181) translate(-1261.0715192380806,-594.2078702223181)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1247.4588498214139 587.4015355139848 L 1261.0715192380806 594.2078702223181 L 1247.4588498214139 601.0142049306514 Z"/></g></g><g><rect fill="white" stroke="none" x="555.9739364869308" y="618.710675172318" width="180.9348627478125" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="558.4242169819308" y="633.412358142318" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Render updated messages</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1261.0715192380806 639.946439462318 L 45.26053386726042 639.946439462318" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(31.811216483593753,639.946439462318) translate(-31.811216483593753,-639.946439462318)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 45.42388590026042 633.1401047539847 L 31.811216483593753 639.946439462318 L 45.42388590026042 646.7527741706514 Z"/></g></g></g><g/><g/><g/><g/></g></svg>